<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Responsive Real-Time Birthday Countdown</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
    height: 100%;
    overflow: hidden; /* prevent scrolling */
    font-family: Arial, sans-serif;
    background-color: #000033;
    color: white;
    text-align: center;
}

/* Containers */
#countdown, #birthday {
    position: relative;
    width: 100%;
    height: 100vh; /* full viewport height */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    overflow: hidden;
}

/* Text: made fully responsive using clamp() */
h1 {
    position: relative;
    z-index: 10;
    margin: 10px 0;
    font-size: clamp(18px, 4.5vw, 48px); /* responsive heading */
    line-height: 1.1;
    padding: 0 10px;
    word-wrap: break-word;
}

p {
    position: relative;
    z-index: 10;
    margin: 6px 0;
    font-size: clamp(14px, 2.5vw, 22px); /* responsive paragraph */
    padding: 0 12px;
    word-wrap: break-word;
}

/* Stars */
#starsCountdown, #stars {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
}

.star {
    position: absolute;
    background: #fff;
    border-radius: 50%;
    opacity: 0.8;
    animation: twinkle 2s infinite ease-in-out;
}

@keyframes twinkle {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
}

/* Moon */
#moonCountdown, #moon {
    position: absolute;
    top: 5%;
    right: 5%;
    width: 15vw;
    max-width: 100px;
    height: 15vw;
    max-height: 100px;
    background: radial-gradient(circle at 30% 30%, #fff, #ddddff);
    border-radius: 50%;
    box-shadow: 0 0 30px #fff, 0 0 60px #aaa;
    z-index: 5;
}

/* Cake as Image */
#cake {
    display: none;
    position: absolute;
    bottom: 5%;
    left: 50%;
    transform: translateX(-50%);
    width: 40vw;
    max-width: 200px;
    height: auto;
}

/* My Photo */
#myPhoto {
    display: none;
    position: absolute;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    width: 25vw;
    max-width: 150px;
    height: auto;
    border-radius: 50%;
    box-shadow: 0 0 15px #fff;
}

/* Wishes - made responsive and constrained so text won't overlap photos */
#wishes {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 86vw; /* slightly reduced to give breathing space */
    max-width: 1000px; /* max width */
    font-size: clamp(14px, 2.6vw, 28px); /* responsive size */
    line-height: 1.4; /* better line spacing */
    text-shadow: 0 0 20px #fff;
    z-index: 10;
    padding: 12px 18px;
    word-wrap: break-word;
    white-space: normal;
    max-height: 46vh; /* limit height so it doesn't run into top/bottom images */
    overflow-y: auto; /* allow scroll if message is long */
    -webkit-overflow-scrolling: touch;
}

/* Rocket Button */
#launchRocket {
    position: relative;
    margin-top: 20px; /* space below countdown */
    padding: 10px 20px;
    background: linear-gradient(45deg, #ff5f6d, #ffc371);
    border: none;
    border-radius: 25px;
    font-size: clamp(14px, 2.2vw, 18px);
    color: #fff;
    cursor: pointer;
    box-shadow: 0 0 10px #ff9;
    transition: transform 0.2s ease;
    z-index: 20;
}

#launchRocket:hover {
    transform: scale(1.05);
}

/* Rocket */
.rocket {
    position: absolute;
    bottom: 50px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 100px;
    background: url('rocket.png') no-repeat center center;
    background-size: contain;
    animation: rocketUp 3s linear forwards;
}

@keyframes rocketUp {
    0% { transform: translateX(-50%) translateY(0); opacity: 1; }
    100% { transform: translateX(-50%) translateY(-120vh); opacity: 0; }
}

/* Comet */
.comet {
    position: absolute;
    width: 2px;
    height: 100px;
    background: linear-gradient(to top, #fff 0%, rgba(255,255,255,0) 100%);
    border-radius: 50%;
    opacity: 1;
    transform: rotate(-45deg);
    animation: fallComet 1.5s linear forwards;
    filter: drop-shadow(0 0 8px #fff) drop-shadow(0 0 15px #fff);
}

@keyframes fallComet {
    0% { transform: translate(0,0) rotate(-45deg); opacity: 1; }
    100% { transform: translate(300px,600px) rotate(-45deg); opacity: 0; }
}

/* Fireworks */
.firework {
    position: absolute;
    width: 0.8vw;
    max-width: 5px;
    height: 0.8vw;
    max-height: 5px;
    border-radius: 50%;
}

/* Confetti */
.confetti {
    position: absolute;
    width: 1vw;
    max-width: 10px;
    height: 1vw;
    max-height: 10px;
    border-radius: 50%;
    animation: fall 3s linear forwards;
}

@keyframes fall {
    0% { transform: translateY(0) rotate(0deg); }
    100% { transform: translateY(600px) rotate(360deg); opacity: 0; }
}

/* Responsive tweaks */
@media(max-width: 1024px){
    #wishes { max-height: 40vh; font-size: clamp(13px, 3.2vw, 26px); }
    #myPhoto { top: 6%; width: 28vw; max-width: 140px; }
    #cake { bottom: 6%; width: 34vw; max-width: 180px; }
}

@media(max-width: 768px){
    #wishes { font-size: clamp(12px, 4.6vw, 22px); width: 90vw; max-height: 44vh; padding: 10px; }
    h1 { font-size: clamp(16px, 6vw, 36px); }
    p { font-size: clamp(12px, 4vw, 18px); }

    #moonCountdown, #moon {
        width: 22vw;
        height: 22vw;
        max-width: 80px;
        max-height: 80px;
        top: 5%;
        right: 5%;
    }

    #cake {
        width: 30vw;
        max-width: 150px;
        bottom: 10%;
    }

    #myPhoto {
        width: 30vw;
        max-width: 120px;
        top: 5%;
    }

    .rocket {
        width: 60px;
        height: 60px;
        bottom: 20px;
    }

    #launchRocket {
        margin-top: 10px; /* keep button centered below countdown */
        font-size: 16px;
    }
}
</style>
</head>
<body>

<div id="countdown">
    <div id="starsCountdown"></div>
    <div id="moonCountdown"></div>
    <h1>Countdown for my special persons Birthday</h1>
    <p id="timer">Calculating...</p>
    <button id="launchRocket">üöÄ Launch Rocket</button>
</div>

<div id="birthday">
    <div id="stars"></div>
    <div id="moon"></div>
    <img id="cake" src="cake.png" alt="Birthday Cake">
    <img id="myPhoto" src="myphoto.jpg" alt="My Photo">
    <div id="wishes">
  <h1>‚ù§Ô∏è‚ú® Happy Birthday Loooosu ‚ú®‚ù§Ô∏è</h1>
My love, today is special because you came into this world. You are my peace, my happiness, and my forever. Every moment with you feels magical. No matter where life takes us, I promise to love you, protect you, and stay by your side till my last breath.
I want to marry you one day and build a beautiful life with you. Happy Birthday, my love ‚ù§Ô∏è
</div>
</div>

<script>
// Target date
const targetDate = new Date();
targetDate.setFullYear(targetDate.getFullYear());
targetDate.setMonth(11);  // December (0-indexed: 11 => December)
targetDate.setDate(1);
targetDate.setHours(0,0,0,0);
if(targetDate < new Date()) targetDate.setFullYear(targetDate.getFullYear()+1);

const countdownTimer = document.getElementById('timer');
const countdownContainer = document.getElementById('countdown');
const birthdayContainer = document.getElementById('birthday');
const starsCountdown = document.getElementById('starsCountdown');
const starsBirthday = document.getElementById('stars');
const cake = document.getElementById('cake');
const wishes = document.getElementById('wishes');
const myPhoto = document.getElementById('myPhoto');

// Comets
function launchComets(num){
    for(let i=0;i<num;i++){
        const comet = document.createElement('div');
        comet.className='comet';
        comet.style.left = Math.random() * window.innerWidth + 'px';
        comet.style.top = Math.random() * (window.innerHeight*0.2) + 'px';
        document.body.appendChild(comet);
        setTimeout(()=>comet.remove(), 1500);
    }
    setTimeout(()=>launchComets(num), 3000);
}
launchComets(3);

// Rocket button
document.getElementById('launchRocket').addEventListener('click', () => {
    const rocket = document.createElement('div');
    rocket.className = 'rocket';
    document.body.appendChild(rocket);
    setTimeout(()=>rocket.remove(), 3000);
});

// Stars
function createStars(container, count){
    // clear existing stars in that container to prevent duplicates
    while(container.firstChild) container.removeChild(container.firstChild);

    for(let i=0;i<count;i++){
        const star = document.createElement('div');
        star.className='star';
        const size = Math.random()*3+1;
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;
        star.style.top = `${Math.random()*100}%`;
        star.style.left = `${Math.random()*100}%`;
        star.style.animationDelay = `${Math.random()*2}s`;
        container.appendChild(star);
    }
}
createStars(starsCountdown, 50);

// Real-time fetch
async function getRealTime(){
    try{
        const response = await fetch('https://worldtimeapi.org/api/timezone/Asia/Kolkata');
        const data = await response.json();
        return new Date(data.datetime);
    }catch(err){
        console.error(err);
        // fallback to client time if API fails
        return new Date();
    }
}

// ---- STORAGE HANDLING FOR 1-HOUR DISPLAY ----
function showBirthdayScreen() {
    countdownContainer.style.display = 'none';
    birthdayContainer.style.display = 'flex';
    cake.style.display = 'block';
    myPhoto.style.display = 'block';
    wishes.style.display = 'block';
    createStars(starsBirthday, 50);
    launchFireworks(15);
    launchConfetti(50);
}

// Countdown
async function updateCountdown(){
    const now = await getRealTime();
    const diff = targetDate - now;

    if(diff > 0){
        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor((diff % (1000*60*60*24))/(1000*60*60));
        const minutes = Math.floor((diff % (1000*60*60))/(1000*60));
        const seconds = Math.floor((diff % (1000*60))/1000);
        countdownTimer.innerHTML = `${days} days, ${hours} hours, ${minutes} minutes, and ${seconds} seconds`;
    }else{
        // Save timestamp to localStorage for 1-hour persistence
        localStorage.setItem("birthdayShownAt", Date.now());

        showBirthdayScreen();
        clearInterval(interval);
    }
}

// Realistic Fireworks
function launchFireworks(num) {
    for (let i = 0; i < num; i++) {
        const firework = document.createElement('div');
        firework.className = 'firework';
        firework.style.left = Math.random() * window.innerWidth + 'px';
        firework.style.bottom = '0px';
        firework.style.width = '4px';
        firework.style.height = '20px';
        firework.style.background = '#fff';
        firework.style.position = 'absolute';
        firework.style.borderRadius = '50%';
        document.body.appendChild(firework);

        const targetHeight = Math.random() * (window.innerHeight * 0.5) + (window.innerHeight * 0.2);
        firework.animate([
            { transform: 'translateY(0px)', opacity: 1 },
            { transform: `translateY(-${targetHeight}px)`, opacity: 1 }
        ], {
            duration: 800 + Math.random() * 400,
            easing: 'ease-out',
            fill: 'forwards'
        });

        setTimeout(() => {
            const explosionCount = 10 + Math.floor(Math.random() * 20);
            for (let j = 0; j < explosionCount; j++) {
                const particle = document.createElement('div');
                particle.className = 'firework';
                particle.style.width = '4px';
                particle.style.height = '4px';
                particle.style.borderRadius = '50%';
                particle.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                particle.style.position = 'absolute';
                particle.style.left = firework.offsetLeft + 'px';
                particle.style.top = (window.innerHeight - targetHeight) + 'px';
                document.body.appendChild(particle);

                const angle = Math.random() * 2 * Math.PI;
                const distance = Math.random() * 100 + 50;
                particle.animate([
                    { transform: 'translate(0,0)', opacity: 1 },
                    { transform: `translate(${distance * Math.cos(angle)}px, ${distance * Math.sin(angle)}px)`, opacity: 0 }
                ], {
                    duration: 1000 + Math.random() * 500,
                    easing: 'ease-out',
                    fill: 'forwards'
                });

                setTimeout(() => particle.remove(), 1500);
            }
            firework.remove();
        }, 800 + Math.random() * 400);
    }
    setTimeout(() => launchFireworks(num), 1500 + Math.random() * 500);
}

// Confetti
function launchConfetti(num){
    for(let i=0;i<num;i++){
        const confetti = document.createElement('div');
        confetti.className='confetti';
        confetti.style.left=Math.random()*window.innerWidth+'px';
        confetti.style.background=`hsl(${Math.random()*360},100%,50%)`;
        document.body.appendChild(confetti);
        setTimeout(()=>confetti.remove(),3000);
    }
    setTimeout(()=>launchConfetti(num),3500);
}

// ---- CHECK IF WISHES SHOULD BE SHOWN FOR 1 HOUR ----
const savedTime = localStorage.getItem("birthdayShownAt");
if(savedTime){
    const now = Date.now();
    const diff = now - savedTime;

    if(diff < 24 * 60 * 60 * 1000){  // 1 hour
        // Show wishes directly
        showBirthdayScreen();
    } else {
        // Expired -> clear storage
        localStorage.removeItem("birthdayShownAt");
    }
}

const interval = setInterval(updateCountdown, 1000);
updateCountdown();
</script>
</body>
</html>
